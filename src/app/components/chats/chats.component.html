<div class="container">
    <div class="row no-gutters content">
        <div class="col-md-4 border-right">
            <div class="settings-tray">
                <img class="profile-image" src="https://www.clarity-enhanced.net/wp-content/uploads/2020/06/filip.jpg"
                    alt="Profile img">
                <span class="settings-tray--right">
                    <i class="material-icons">cached</i>
                    <i class="material-icons">message</i>
                    <i class="material-icons">menu</i>
                </span>
            </div>
            <div class="search-box">
                <div class="input-wrapper">
                    <i class="material-icons">search</i>
                    <input placeholder="Search here" type="text">
                </div>
            </div>
            <!-- Sidenav Chats Section -->
            <div *ngFor="let chat of chats" (click)="openChat(chat.id!)">
            <div class="friend-drawer friend-drawer--onhover" >
                <img class="profile-image" src="https://www.clarity-enhanced.net/wp-content/uploads/2020/06/robocop.jpg"
                    alt="">
                <div class="text">
                    <h4>{{ chat.chatName }}</h4>
                    <p class="text-muted">{{ chat.lastMessage.content }}</p>
                </div>
                <span class="time text-muted small">{{ chat.lastMessage.createdAt | dfnsFormatDistanceToNow : {includeSeconds: true, addSuffix : true } }}</span>
            </div>
            <hr>
            </div>
        </div>
        <!-- Current Chat Section -->
        <div class="col-md-8">
            <div class="settings-tray">
                <div class="friend-drawer no-gutters friend-drawer--grey">
                    <img class="profile-image"
                        src="https://www.clarity-enhanced.net/wp-content/uploads/2020/06/robocop.jpg" alt="">
                    <div class="text">
                        <h3>{{ receiver?.name }}</h3>
                        <!-- <p class="text-muted">Layin' down the law since like before Christ...</p> -->
                    </div>
                    <span class="settings-tray--right">
                        <i class="material-icons">cached</i>
                        <i class="material-icons">message</i>
                        <i class="material-icons">menu</i>
                    </span>
                </div>
            </div>
            <!-- Current Chat Messages Section-->
            <div class="chat-panel" *ngIf="this.messages.length !== 0">
                <div class="row no-gutters messages" #scroller>
                    <div class="row" *ngFor="let message of messages" 
                        [ngClass]="{'sent': message.senderSubject == myClaims.sub}">
                        <div 
                        [ngClass]="message.senderSubject == myClaims.sub ? 'chat-bubble chat-bubble--right' : 'chat-bubble chat-bubble--left'">
                            <div class="msg-content">
                                {{ message.content }}
                                <div class="msg-time"><span class="time text-muted small msg-time">12:12</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="chat-box-tray">
                            <i class="material-icons">sentiment_very_satisfied</i>
                            <input type="text" placeholder="Type your message here..." [(ngModel)]="msgContent" (keyup.enter)="sendMessage()">
                            <!-- <i class="material-icons">mic</i> -->
                            <button [disabled]="msgContent.length === 0" (click)="sendMessage()" style="border: transparent;">
                                <i class="material-icons">send</i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>